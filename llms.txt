# ecopiapi

> \[!NOTE\] This repository/ R-Package will soon be replace by the
> RClient repository/ R-Package!

The goal of ecopiapi is to Get, post, patch data from the ecop API.

Find the full documentation here: <https://oekofor.github.io/ecopiapi/>

## Installation

You can install the development version of ecopiapi from
[GitHub](https://github.com/) with: You will need your Github PAT for
authentication (privat repo).

Install a specific version

``` r
devtools::install_github("OekoFor/ecopiapi@0.1.3", auth_token = {GITHUB_PAT})
```

OR Install the latest commit from the main branch

``` r
# install.packages("devtools")
devtools::install_github("OekoFor/ecopiapi", auth_token = {GITHUB_PAT})
```

## Example

To interact with the API, you need a valid key. It is recommended to
store it as an environmental variable in `.Renviron` in the root
directory of th project. The envar must be named `ECOPI_API_KEY`.

``` r
library(ecopiapi)
get_detections_list(params = list("project_name" = "017_neeri", "datetime__month" = 3))
get_latest_detections()
get_latest_detections_by_project(project_name = "017_neeri")
get_latest_detections_by_recorder(recorder_name = "00000000d76d0bf9")
get_latest_detections_by_recordergroup(project_name = "053_sion", recordergroup_name = "lapwing")
get_recordings_list(params = list("project_name" = "017_neeri", "datetime__month" = 3))
```

# Package index

## All functions

- [`ecopi_api()`](https://oekofor.github.io/ecopiapi/reference/ecopi_api.md)
  : Make API requests to the Ecopi API
- [`ecopi_error_body()`](https://oekofor.github.io/ecopiapi/reference/ecopi_error_body.md)
  : Extract error message from JSON body of an HTTP response
- [`get_aggregations_project_detections_count()`](https://oekofor.github.io/ecopiapi/reference/get_aggregations_project_detections_count.md)
  : Get a count of detections per project by default and per group(s) if
  specified.
- [`get_aggregations_project_recorder_time_series()`](https://oekofor.github.io/ecopiapi/reference/get_aggregations_project_recorder_time_series.md)
  : Count of detections & sum of recorded minutes per user defined
  interval for a !!recorder!! of a project.
- [`get_aggregations_project_time_series()`](https://oekofor.github.io/ecopiapi/reference/get_aggregations_project_time_series.md)
  : Count of detections & sum of recorded minutes per user defined
  interval for a project.
- [`get_by_url()`](https://oekofor.github.io/ecopiapi/reference/get_by_url.md)
  : Get data from a linked URL endpoint (mostly provided from other
  gtes)
- [`get_detections()`](https://oekofor.github.io/ecopiapi/reference/get_detections.md)
  : Get detections list.
- [`get_detections_retrieve()`](https://oekofor.github.io/ecopiapi/reference/get_detections_retrieve.md)
  : Get detections retrieve.
- [`get_historicalprojects()`](https://oekofor.github.io/ecopiapi/reference/get_historicalprojects.md)
  : Get historical projects list.
- [`get_historicalrecordergroups()`](https://oekofor.github.io/ecopiapi/reference/get_historicalrecordergroups.md)
  : Get historical recorder groups list.
- [`get_historicalrecorders()`](https://oekofor.github.io/ecopiapi/reference/get_historicalrecorders.md)
  : Get historical recorders list.
- [`get_mediafile()`](https://oekofor.github.io/ecopiapi/reference/get_mediafile.md)
  : Get media file.
- [`get_project_info()`](https://oekofor.github.io/ecopiapi/reference/get_project_info.md)
  : Get project info.
- [`get_projects()`](https://oekofor.github.io/ecopiapi/reference/get_projects.md)
  : Get projects list.
- [`get_recordergroups()`](https://oekofor.github.io/ecopiapi/reference/get_recordergroups.md)
  : Get recorder groups list.
- [`get_recorderlogs()`](https://oekofor.github.io/ecopiapi/reference/get_recorderlogs.md)
  : Get recorder logs list.
- [`get_recorders()`](https://oekofor.github.io/ecopiapi/reference/get_recorders.md)
  : Get recorders list.
- [`get_recorders_count_detections()`](https://oekofor.github.io/ecopiapi/reference/get_recorders_count_detections.md)
  : Get a count of detections per recorder grouped by given parameters.
- [`get_recorders_count_detections_project_recorder_recordings()`](https://oekofor.github.io/ecopiapi/reference/get_recorders_count_detections_project_recorder_recordings.md)
  : Get a count of detections per recorder grouped by rerecording.
- [`get_recorderspeciescounts()`](https://oekofor.github.io/ecopiapi/reference/get_recorderspeciescounts.md)
  : Get a count of detections per species and recorder for a specific
  project.
- [`get_recorderstates()`](https://oekofor.github.io/ecopiapi/reference/get_recorderstates.md)
  : Get recorder states list.
- [`get_recordings()`](https://oekofor.github.io/ecopiapi/reference/get_recordings.md)
  : Get recordings list.
- [`patch_detections()`](https://oekofor.github.io/ecopiapi/reference/patch_detections.md)
  : PATCH detection
- [`patch_recorders()`](https://oekofor.github.io/ecopiapi/reference/patch_recorders.md)
  : PATCH recorder.
- [`post_detection()`](https://oekofor.github.io/ecopiapi/reference/post_detection.md)
  : Post a new detection
- [`resp_body_json_to_df()`](https://oekofor.github.io/ecopiapi/reference/resp_body_json_to_df.md)
  : Convert API Response Body to Data Frame

